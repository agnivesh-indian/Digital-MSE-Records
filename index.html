<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Digital MSE Records</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Tinos:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #005f73;
            --background-color: #e9ecef;
            --container-bg: #ffffff;
            --text-color: #212529;
            --border-color: #ced4da;
            --danger-color: #d90429;
            --success-color: #2a9d8f;
            --warning-color: #e9c46a;
            --font-main: 'Inter', sans-serif;
            --font-report: 'Tinos', serif;
            --input-bg: var(--container-bg);
            --input-text: var(--text-color);
        }
        .dark-mode {
            --background-color: #1a202c; /* Darker background */
            --container-bg: #2d3748;    /* Darker container */
            --text-color: #e2e8f0;      /* Lighter text */
            --border-color: #4a5568;    /* Adjusted border */
            --input-bg: #4a5568;        /* Darker input background */
            --input-text: #e2e8f0;      /* Lighter input text */
        }
        body {
            font-family: var(--font-main);
            line-height: 1.7;
            margin: 0;
            padding: 20px;
            background-color: var(--background-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            max-width: 950px;
            margin: auto;
            background: var(--container-bg);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .header-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .theme-switch-wrapper {
            display: flex;
            align-items: center;
        }
        .theme-switch {
            display: inline-block;
            height: 34px;
            position: relative;
            width: 60px;
        }
        .theme-switch input {
            display:none;
        }
        .slider {
            background-color: #ccc;
            bottom: 0;
            cursor: pointer;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            background-color: #fff;
            bottom: 4px;
            content: "";
            height: 26px;
            left: 4px;
            position: absolute;
            transition: .4s;
            width: 26px;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        h1, h2, h3 {
            color: var(--primary-color);
        }
        h1 { font-size: 2.2rem; text-align: center; }
        h2 { font-size: 1.6rem; border-bottom: 2px solid var(--primary-color); padding-bottom: 10px; margin-top: 40px; }
        h3 { font-size: 1.2rem; margin-top: 25px; }
        
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; }
        .form-group { display: flex; flex-direction: column; }
        .form-group-full { grid-column: 1 / -1; }

        label { font-weight: 500; margin-bottom: 8px; }
        input[type="text"], input[type="number"], input[type="password"], input[type="datetime-local"], select, textarea {
            width: 100%;
            padding: 12px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            font-size: 1rem;
            background-color: var(--container-bg);
            color: var(--text-color);
        }
        .name-field { position: relative; }
        .toggle-visibility { position: absolute; right: 10px; top: 50%; transform: translateY(calc(50% - 8px)); cursor: pointer; user-select: none; }
        
        .alert-field label { color: var(--danger-color); font-weight: 700; }
        .alert-field textarea { border-color: var(--danger-color); }

        .button-group { display: flex; justify-content: flex-end; gap: 10px; margin-top: 30px; }
        button { padding: 12px 20px; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500; }
        .btn-primary { background-color: var(--primary-color); color: white; }
        .btn-secondary { background-color: #6c757d; color: white; }
        a.btn-dashboard { background-color: var(--success-color); color: white; text-decoration: none; padding: 12px 20px; border-radius: 6px; font-size: 1rem; font-weight: 500;}
        
        .download-btn-group { position: relative; }
        .download-btn { background-color: #007bff; }
        .download-options { display: none; position: absolute; background-color: white; min-width: 100px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 1; border-radius: 4px; }
        .download-options a { color: black; padding: 12px 16px; text-decoration: none; display: block; }
        .download-options a:hover { background-color: #f1f1f1; }
        .show-download { display: block; }

        .dark-mode .download-options {
            background-color: #2d3748;
        }

        .dark-mode .download-options a {
            color: #e2e8f0;
        }

        footer {
            margin-top: 40px;
            text-align: center;
            font-size: 0.9rem;
            color: #6c757d;
        }
        .dark-mode footer {
            color: #a0aec0;
        }
    <link rel="stylesheet" href="mobile.css" media="screen and (max-width: 768px)">
    </style>
</head>
<body>
    <div class="container">
        <div class="header-controls">
            <div class="navigation-links">
                <a href="dashboard.html" class="btn-dashboard">MSE Records Dashboard</a>
            </div>
            <div class="theme-switch-wrapper">
                <span>Dark Mode</span>
                <label class="theme-switch" for="checkbox">
                    <input type="checkbox" id="checkbox" />
                    <div class="slider round"></div>
                </label>
            </div>
        </div>
        <h1>PSYCHIATRIC HISTORY AND MENTAL STATUS EXAMINATION</h1>

        <div class="form-section">
            <div class="form-grid" style="grid-template-columns: repeat(2, 1fr);">
                <div class="form-group"><label for="examined-by">Examined by:</label><input type="text" id="examined-by"></div>
                <div class="form-group"><label for="date">Date:</label><input type="datetime-local" id="date"></div>
                <div class="form-group name-field"><label for="patient-name">Patient Name:</label><input type="text" id="patient-name"><span class="toggle-visibility">üëÅÔ∏è</span></div>
                <div class="form-group"><label for="age">Age:</label><input type="number" id="age"></div>
                <div class="form-group"><label for="sex">Sex:</label><select id="sex"><option>Male</option><option>Female</option><option>Other</option></select></div>
                <div class="form-group"><label for="place">Place:</label><input type="text" id="place"></div>
                <div class="form-group"><label for="education">Education:</label><select id="education"><option>None</option><option>Primary</option><option>High School</option><option>Some College</option><option>Graduate</option><option>Post-Graduate</option><option>Doctorate</option></select></div>
                <div class="form-group"><label for="occupation">Occupation:</label><input type="text" id="occupation"></div>
                <div class="form-group"><label for="religion">Religion:</label><input type="text" id="religion"></div>
                <div class="form-group"><label for="marital-status">Marital Status:</label><select id="marital-status"><option>Single</option><option>Married</option><option>Divorced</option><option>Widowed</option></select></div>
                <div class="form-group"><label for="informant">Informant:</label><input type="text" id="informant"></div>
                <div class="form-group"><label for="informant-relation">Relation:</label><select id="informant-relation"><option>Parent</option><option>Spouse</option><option>Sibling</option><option>Friend</option><option>Self</option><option>Other</option></select></div>
            </div>
        </div>

        <div class="form-section">
            <div class="form-group form-group-full"><label for="chief-complaints">Chief complaints with duration:</label><textarea id="chief-complaints"></textarea></div>
            <div class="form-grid" style="grid-template-columns: repeat(2, 1fr);">
                <div class="form-group"><label for="mode-of-onset">Mode of onset:</label><input type="text" id="mode-of-onset"></div>
                <div class="form-group"><label for="precipitating-factors">Precipitating Factors:</label><input type="text" id="precipitating-factors"></div>
            </div>
            <div class="form-group form-group-full"><label for="reason-for-consultation">Reason for consultation:</label><textarea id="reason-for-consultation"></textarea></div>
            <div class="form-group form-group-full"><label for="history-of-present-illness">History of Present Illness:</label><textarea id="history-of-present-illness"></textarea></div>
        </div>

        <div class="form-section">
            <h2>History:</h2>
            <h3>A) Early Development and Childhood:</h3>
            <div class="form-grid" style="grid-template-columns: repeat(2, 1fr);">
                <div class="form-group"><label for="dev-birth-weight">Birth Weight:</label><input type="text" id="dev-birth-weight"></div>
                <div class="form-group"><label for="dev-milestones">Developmental Milestones:</label><input type="text" id="dev-milestones"></div>
                <div class="form-group"><label for="dev-birth-order">Birth Order:</label><input type="text" id="dev-birth-order"></div>
                <div class="form-group"><label for="dev-childhood-disorders">Childhood Disorder:</label><input type="text" id="dev-childhood-disorders"></div>
            </div>
            <h3>B) Educational History:</h3>
            <div class="form-group form-group-full"><textarea id="educational-history"></textarea></div>
            <h3>C) Occupational History:</h3>
            <div class="form-group form-group-full"><textarea id="occupational-history"></textarea></div>
            <div class="form-grid" style="grid-template-columns: repeat(4, 1fr);">
                <div class="form-group"><label for="sleep">Sleep:</label><input type="text" id="sleep"></div>
                <div class="form-group"><label for="eating">Eating:</label><input type="text" id="eating"></div>
                <div class="form-group"><label for="bowels">Bowels:</label><input type="text" id="bowels"></div>
                <div class="form-group"><label for="personal-care">Personal care:</label><input type="text" id="personal-care"></div>
            </div>
            <h3>H) Treatment History:</h3>
            <div class="form-group form-group-full"><textarea id="treatment-history"></textarea></div>
            <h3>I) Past History of Mental Illness:</h3>
            <div class="form-group form-group-full"><textarea id="past-history-of-mental-illness"></textarea></div>
            <h3>J) Family History:</h3>
            <div class="form-grid" style="grid-template-columns: repeat(2, 1fr);">
                <div class="form-group"><label for="family-type">Type of Family</label><input type="text" id="family-type"></div>
                <div class="form-group"><label for="family-ses">Socio-Economic Status:</label><input type="text" id="family-ses"></div>
            </div>
            <h4>Genogram</h4>
            <div class="form-group form-group-full"><textarea id="genogram"></textarea></div>
        </div>

        <div class="form-section">
            <h2>Premorbid Personality:</h2>
            <div class="form-grid" style="grid-template-columns: repeat(2, 1fr);">
                <div class="form-group"><label for="pm-mood">Predominant Mood:</label><input type="text" id="pm-mood"></div>
                <div class="form-group"><label for="pm-social">Social Relation:</label><input type="text" id="pm-social"></div>
                <div class="form-group form-group-full"><label for="family-relationships">Interpersonal Relationship with Family:</label><textarea id="family-relationships"></textarea></div>
                <div class="form-group"><label for="pm-leisure">Use of Leisure Time:</label><input type="text" id="pm-leisure"></div>
            </div>
        </div>
        
        <div class="form-section">
            <h2>MENTAL STATUS EXAMINATION</h2>
            <h3>General Appearance:</h3>
            <div class="form-grid" style="grid-template-columns: repeat(3, 1fr);">
                <div class="form-group"><label for="body-built">Body Built:</label><select id="body-built"><option>Ectomorphic</option><option>Mesomorphic</option><option>Endomorphic</option></select></div>
                <div class="form-group"><label for="dressing">Dressing:</label><input type="text" id="dressing"></div>
                <div class="form-group"><label for="grooming">Hygiene and Grooming:</label><select id="grooming"><option>Well-groomed</option><option>Average</option><option>Poor/Unkempt</option></select></div>
                <div class="form-group"><label for="rapport">Rapport:</label><input type="text" id="rapport"></div>
                <div class="form-group"><label for="psychomotor-activity">Psychomotor Activity:</label><select id="psychomotor-activity"><option>Normal</option><option>Retarded</option><option>Agitated</option></select></div>
                <div class="form-group"><label for="eye-contact">Eye Contact with the Examiner:</label><select id="eye-contact"><option>Maintained</option><option>Fleeting</option><option>Guarded</option><option>Avoidant</option><option>Staring</option></select></div>
                <div class="form-group"><label for="attitude-toward-examiner">Attitude toward Examiner:</label><input type="text" id="attitude-toward-examiner"></div>
                <div class="form-group"><label for="facial-expressions">Facial Expressions:</label><input type="text" id="facial-expressions"></div>
                <div class="form-group"><label for="level-of-distress">Level of distress:</label><input type="text" id="level-of-distress"></div>
                <div class="form-group"><label for="abnormal-movements-or-postures">Abnormal Movements or Postures:</label><input type="text" id="abnormal-movements-or-postures"></div>
            </div>
        </div>

        <div class="form-section">
            <h3>Speech</h3>
            <div class="form-grid" style="grid-template-columns: repeat(3, 1fr);">
                <div class="form-group"><label for="speech-rate">Voice and Speech Rate:</label><select id="speech-rate"><option>Normal</option><option>Pressured</option><option>Slow/Delayed</option></select></div>
                <div class="form-group"><label for="reaction-time">Reaction Time:</label><input type="text" id="reaction-time"></div>
                <div class="form-group"><label for="articulation-and-fluency">Articulation and Fluency:</label><input type="text" id="articulation-and-fluency"></div>
                <div class="form-group"><label for="relevance">Relevance:</label><select id="relevance"><option>Yes</option><option>No</option></select></div>
                <div class="form-group"><label for="coherence">Coherence</label><select id="coherence"><option>Yes</option><option>No</option></select></div>
                <div class="form-group"><label for="speech-latency">Speech Latency:</label><input type="text" id="speech-latency"></div>
                <div class="form-group"><label for="prosody-of-speech">Prosody of Speech:</label><input type="text" id="prosody-of-speech"></div>
                <div class="form-group"><label for="tone">Tone:</label><input type="text" id="tone"></div>
                <div class="form-group"><label for="tempo">Tempo:</label><input type="text" id="tempo"></div>
                <div class="form-group"><label for="volume">Volume:</label><input type="text" id="volume"></div>
                <div class="form-group"><label for="quantity">Quantity:</label><input type="text" id="quantity"></div>
            </div>
        </div>

        <div class="form-section">
            <h3>Mood</h3>
            <div class="form-group form-group-full"><textarea id="mood"></textarea></div>
        </div>
        
        <div class="form-section">
            <h3>Affect</h3>
            <div class="form-grid" style="grid-template-columns: repeat(3, 1fr);">
                <div class="form-group"><label for="quality">Quality:</label><input type="text" id="quality"></div>
                <div class="form-group"><label for="congruency">Congruency:</label><input type="text" id="congruency"></div>
                <div class="form-group"><label for="range">Range:</label><input type="text" id="range"></div>
                <div class="form-group"><label for="mobility">Mobility:</label><input type="text" id="mobility"></div>
                <div class="form-group"><label for="appropriateness-to-situation">Appropriateness to situation:</label><input type="text" id="appropriateness-to-situation"></div>
            </div>
        </div>

        <div class="form-section">
            <h3>Thought</h3>
            <div class="form-group form-group-full"><label for="thought-process">Thought Process:</label><textarea id="thought-process"></textarea></div>
            <h4>Thought Stream</h4>
            <div class="form-grid" style="grid-template-columns: repeat(3, 1fr);">
                <div class="form-group">
                    <label for="thought-stream-circumstantiality">Circumstantiality:</label>
                    <select id="thought-stream-circumstantiality">
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="thought-stream-tangentiality">Tangentiality:</label>
                    <select id="thought-stream-tangentiality">
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="thought-stream-other">Occasional/Other:</label>
                    <input type="text" id="thought-stream-other">
                </div>
            </div>

            <h4>Content</h4>
            <div class="form-grid" style="grid-template-columns: repeat(2, 1fr);">
                <div class="form-group"><label for="delusions">Delusions:</label><input type="text" id="delusions"></div>
                <div class="form-group"><label for="depressive-ideations">Depressive Ideations:</label><input type="text" id="depressive-ideations"></div>
                <div class="form-group form-group-full alert-field"><label for="risk-assessment">Suicidal or Homicidal Ideations:</label><textarea id="risk-assessment"></textarea></div>
                <div class="form-group"><label for="obsessions-and-compulsions">Obsessions and Compulsions:</label><input type="text" id="obsessions-and-compulsions"></div>
                <div class="form-group"><label for="phobias">Phobias:</label><input type="text" id="phobias"></div>
            </div>
        </div>

        <div class="form-section">
            <h3>Perception</h3>
            <div class="form-grid" style="grid-template-columns: repeat(2, 1fr);">
                <div class="form-group"><label for="hallucination">Hallucination:</label><input type="text" id="hallucination"></div>
                <div class="form-group"><label for="illusion">Illusion:</label><input type="text" id="illusion"></div>
                <div class="form-group"><label for="dissociation">Dissociation:</label><input type="text" id="dissociation"></div>
                <div class="form-group"><label for="agnosia">Agnosia:</label><input type="text" id="agnosia"></div>
            </div>
        </div>

        <div class="form-section">
            <h3>Sensorium and Cognition</h3>
            <div class="form-grid" style="grid-template-columns: repeat(2, 1fr);">
                <div class="form-group"><label for="orientation">Orientation:</label><select id="orientation"><option>Intact</option><option>Impaired</option></select></div>
                <div class="form-group"><label for="level-of-consciousness">Level of Consciousness:</label><input type="text" id="level-of-consciousness"></div>
                <div class="form-group"><label for="attention">Attention:</label><input type="text" id="attention"></div>
                <div class="form-group"><label for="concentration">Concentration:</label><input type="text" id="concentration"></div>
            </div>
        </div>

        <div class="form-section">
            <h3>Memory</h3>
            <div class="form-grid" style="grid-template-columns: repeat(3, 1fr);">
                <div class="form-group"><label for="memory-immediate">Immediate Memory:</label><select id="memory-immediate"><option>Intact</option><option>Impaired</option></select></div>
                <div class="form-group"><label for="memory-recent">Recent Memory:</label><select id="memory-recent"><option>Intact</option><option>Impaired</option></select></div>
                <div class="form-group"><label for="memory-remote">Remote Memory:</label><select id="memory-remote"><option>Intact</option><option>Impaired</option></select></div>
            </div>
            <div class="form-group form-group-full"><label for="general-knowledge">General Knowledge:</label><input type="text" id="general-knowledge"></div>
            <div class="form-group form-group-full"><label for="comprehension">Comprehension</label><input type="text" id="comprehension"></div>
            <div class="form-group form-group-full"><label for="arithematic-ability">Arithematic Ability</label><input type="text" id="arithematic-ability"></div>
            <div class="form-group form-group-full"><label for="abstract-ability">Abstract Ability</label><input type="text" id="abstract-ability"></div>
        </div>

        <div class="form-section">
            <h3>Judgement</h3>
            <div class="form-grid" style="grid-template-columns: repeat(2, 1fr);">
                <div class="form-group"><label for="personal-judgement">Personal Judgement:</label><input type="text" id="personal-judgement"></div>
                <div class="form-group"><label for="social-judgement">Social Judgement:</label><input type="text" id="social-judgement"></div>
                <div class="form-group"><label for="test-judgement">Test Judgement:</label><input type="text" id="test-judgement"></div>
            </div>
        </div>

        <div class="form-section">
            <h3>Insight</h3>
            <div class="form-group form-group-full"><select id="insight"><option>Grade 1 (Total denial)</option><option>Grade 2</option><option>Grade 3</option><option>Grade 4</option><option>Grade 5</option><option>Grade 6 (True emotional insight)</option></select></div>
        </div>

        <div class="form-section">
            <h3>Notes</h3>
            <div class="form-group form-group-full">
                <textarea id="notes" rows="5"></textarea>
            </div>
        </div>

        <div class="form-section">
            <h3>Custom Fields</h3>
            <div id="custom-fields-container"></div>
            <button id="add-custom-field-btn" type="button" class="btn-secondary">Add Custom Field</button>
        </div>

        <div class="button-group">
            <button id="save-btn" class="btn-primary">Save Record</button>
            <button id="clear-btn" class="btn-secondary">Clear Fields</button>
            <div class="download-btn-group">
                <button class="download-btn">Download</button>
                <div class="download-options">
                    <a href="#" onclick="App.generatePdfFromForm(); return false;">PDF</a>
                    <a href="#" onclick="App.generateDocxFromForm(); return false;">DOCX</a>
                </div>
            </div>
        </div>
    </div>
    <footer>
        &copy; Agnivesh_Indian. This is created for the ease of professionals in maintaining the records and add such data.
    </footer>
    <script src="form-structure.js"></script>
    <script src="main.js"></script>
</body>
</html>